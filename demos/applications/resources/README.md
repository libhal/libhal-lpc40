# Converting Resources to Code

## Converting MP3 to mono unsigned pcm

To unsigned PCM16:

```bash
ffmpeg -i uniq-BOMBORA.trimmed.mp3 -ar 16000 -ac 1 -f u16le -acodec pcm_u16le uniq-BOMBORA.u16.pcm
```

To unsigned PCM8:

```bash
ffmpeg -i uniq-BOMBORA.trimmed.mp3 -ar 16000 -ac 1 -f u8 -acodec pcm_u8 uniq-BOMBORA.u8.pcm
```

To convert the PCM data into a C header file:

```bash
xxd -i uniq-BOMBORA.u8.pcm > uniq-BOMBORA.u8.pcm.h
xxd -i uniq-BOMBORA.u16.pcm > uniq-BOMBORA.u16.pcm.h
```

Finally, we need to add a few things to the header files.

1. Add an include guard `#pragma once` at the top of each file
2. Make the array an `inline const` in order to coax the compiler into storing
   the data in the `.rodata` section (flash memory).
3. Delete the length on the bottom. Its not necessary as the C style array's
   length is known at compile time.

Should look something like this:

```C++
#pragma once

const inline unsigned char uniq_BOMBORA_u8_pcm[] = {
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
  // ...
};
```

> [!NOTE]
> PCM is the fully uncompressed representation of the data and as such it will
> take up a lot of flash memory. It may only be possible to fit a very small
> section of music data into the device at a time.
